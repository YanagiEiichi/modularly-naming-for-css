# CSS 模块化命名

想命名是一件很痛苦的事，我经常会在一个命名上纠结好久。在大型项目中，一套标准的命名方式更是必不可少。这里根据我自己以往的项目经验，总结一套「可以用」的命名方式分享给大家。这里并没有对一些细节问题做约定，只是阐述一些 CSS 模块化命名中的一些原则问题而已。需要与其他「CSS 书写风格规范」之类的东西一起才能真正在项目中使用。

### 声明

由于这套命名中会用到子选择器和多类选择器，所以不考虑 IE7 及更低版本的 IE 浏览器。

这套命名目前只是一个「可以用」的状态，如果大家有什么建议或决定我的观点有错误可以提 ISSUE。

### 模块的概念

虽然大家都在说「模块」，但实际上大家对「模块」的定义根本就不一样，很多讨论没法得出结理论的原因就在于此。就像同样的 PM2.5，香港都红色预警了大陆依然标着「优」。概念不同的话说什么都是耍流氓，所以我们既然要说「模块化」，那么我们首先就要给「模块」一个明确的定义。

我所说的「模块」指的是全局定义的名称，无论它是一个组件，还是一个全局通用规则，甚至是一个页面的业务类，比如：

```css
.clearfix {}
.dropdown {}
.homepage {}
```

这些对我而言都是「模块」。

### 模块的分类与命名

在这套「CSS 模块化命名」中，我们还将模块分为下面几类以便于管理，并且这些不同的分类有不同的命名规则：

* 页面，与 HTML 文件对应的页面部分，比如 `.homepage`
* 组件，带固定 HTML 结构的通用部分，比如 `.dropdown`
* 修饰，没有 HTML 部分的通用样式，比如 `.clearfix`

对页面类的模块命名通常是根据页面路径来做的，页面路径这东西本身是无规范的，但我建议使用 RESTful 的命名规范，对页面路径使用名词。所以我们应该尽可能地对这类模块使用名词来命名。

组件类的模块命名通常会根据组件的功能来决定，虽然经常会是动词，但我们也应该将其变换成同词根的名词形式来给组件命名。所以我们同样是尽可能地对这类模块使用名词。

最后是修饰类，它们没有 HTML 结构，甚至有些都没有自身样式（只有在多类选择时才设置样式）。所以对于这类模块我们会使用尽可能地使用形容词（偶尔也会出现一些副词）。

除了这些词性上的命名规则外，这套命名中所有「-」用于表示层级关系，禁止用于单词分割。分词方式可以根据自己的喜好或视团队情况来做进一步约定，这里不做限制。比如可以不做单词分割，直接抽掉空格让单词堆在一起，也可以使用驼峰命名来分割单词。

建议再三斟酌后再决定模块名，因为词汇是稀缺资源。比如不建议把页面上一个小小的新闻展示模块命名为 `news`，这太奢侈了。 将来很可能存在一个叫做 `news` 的页面。

### 模块的子规则

光有模块当然不行，模块内部还有一系列复杂的子样式，通过「-」前缀的方式来命名。比如

```css
.homepage {}
.homepage-banner {}
.homepage-news {}
.homepage-news-more {}
```

这里的 `.homepage-banner`、`.homepage-news` 以及 `.homepage-news-more` 都是 `.homepage` 这个模块下的子规则。对于某个模块下的子规则总是以所在模块名作为前缀，以「-」分割。至于后面有多少个层级就视业务而定，此处不做要求。所有子规则扁平地定义，不要使用后代选择器，比如下面这个写法是不推荐的：

```css
.homepage .homepage-banner {}
.homepage .homepage-news {}
.homepage .homepage-news-more {}
```

这么做会徒增 CSS 选择器的优先级，使以后的样式层叠受到阻碍。

也许有人会问，为什么搞这么麻烦？直接在模块上使用后代选择器不是很安全吗？比如：

```css
.homepage .banner {}
.homepage .news {}
.homepage .news-more {}
```

其实这是非常糟糕的解决方案。首先，这个做法同样有上面的选择器优先级问题。即使不考虑优先级问题，这个做法还有更坏的影响。虽然我们在一个组件的后代选择器中写规则不会影响到其他组件，但这种做法无法确保其他全局模块不会和当前组件的子规则命名冲突。比如我像上面这样直接使用 `.homepage .news` 来选择 `.homepage` 下的 `.news` 部分，虽然在这里的 `.news` 中设置样式绝对是安全的，但如果将来的业务需求来一个名为 `news` 的页面，我们就无法再使用 `.news` 作为那个页面的组件名，因为会和这里的 `.news` 冲突。所以如果这么做，以后添加任何一个模块都要胆战心惊，因为很难确定一个命名是否被用在了某个奇怪的角落。

上面规定子规则必须是以所在模块的模块名为前缀就是为了避免这种冲突。

### 模块的嵌套

模块允许出现在任何地方，允许任意嵌套，且允许一个元素上设置多个模块。比如

```html
<style>
.yellow { color: yellow; }
.green { color: green; }
.yellow.green { color: yellowgreen; }
</style>
<div class="yellow">yellow
   <div class="green">green</div>
</div>
<div class="yellow green">yellowgreen</div>
```

也可以在一个模块中使用后代选择器去选择其包含的另一个模块，比如：
　　
```html
<style>
.homepage .clearfix { border: 1px solid red; }
.homepage-floating { float: left; }
.clearfix { overflow: hidden; }
</style>
<div class="homepage">
  <div class="clearfix">
    <div class="homepage-floating">floating</div>
  </div>
</div>
```

如果是模块自嵌套，也许还要考虑自冲突的问题。建议在开发可能自嵌套的模块时用子选择器替代后代选择器。

### 开发建议

由于「模块」是一种全局概念，所以在开发中建议为所有「模块」都编写文档。即使没有做详细描述，至少也应该在文档中将已经用过的命名标记出，以便添加新模块时可以迅速查到。

如果一个模块存在 HTML 部分，应该将相应的 HTML 部分的内容或链接也附上文档以便统一管理。
